<html>

	<head>
	
	<script src="/socket.io.js"></script>
	<script>
		var tasks = [];
		var socket = io.connect('http://localhost:1234');
		socket.on("connect", function(connection){
			console.log("Ready");
			socket.emit("ready");
		});
		socket.on("task", function ($task){
			console.log("Got a task!");
			tasks.push("TASK");
			eval("task = " + $task);
			socket.emit("finished", task());
			tasks.pop();
		});
		setInterval(function(){
			if(tasks.length <= 0){
				socket.emit("ready");
			}
		}, 1000);
	</script>
	
	</head>
	
	<body></body>

</html>